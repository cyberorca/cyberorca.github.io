<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="state"></div>
    <script>
        window.addEventListener("orientationchange", mobilePullerOrieantation);
        function mobilePullerOrieantation(){
            let _ios = ["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document;
            let _orientationScreenAPI = (screen.orientation || {}).type || screen.mozOrientation || screen.msOrientation;
            let _logContainer = document.querySelector(".state");
            _logContainer.innerHTML = "";

            let _isPortrait = 0;
            let _isPortraitListener = 0;

            if (typeof _orientationScreenAPI !== "undefined") {
                console.log("_orientationScreenAPI",_orientationScreenAPI);
            } else {
                let _orientation = document.documentElement.clientWidth < document.documentElement.clientHeight ? 1 : 0;
                _orientation = _ios ? ((navigator.userAgent.match(/(criOS)/ig) !== null) ? _orientation : !_orientation) : ((navigator.userAgent.match(/(CPH1937)/ig) !== null) ? _orientation : !_orientation);
                console.log("crIOS",_orientation);
            }



            // Find matches
            var mql = window.matchMedia("(orientation: portrait)");

            // If there are matches, we're in portrait
            if(mql.matches) {  
                // Portrait orientation
                _isPortrait = 1;
            } else {  
                // Landscape orientation
                _isPortrait = 0;
            }

            // Add a media query change listener
            mql.addListener(function(m) {
                if(m.matches) {
                    // Changed to portrait
                    _isPortraitListener = 1;
                }
                else {
                    // Changed to landscape
                    _isPortraitListener = 0;
                }
            });

            let pOrientationScreenAPI = document.createElement("p");
            let pOrientation = document.createElement("p");
            let pcCriOS = document.createElement("p");
            let pCPH1937 = document.createElement("p");
            let pDevice = document.createElement("p");
            let pClientHeight = document.createElement("p");
            let pIsPortrait = document.createElement("p");
            let pIsPortraitListener = document.createElement("p");

            pDevice.innerText = " DEVICE IS IOS ? : " +_ios;
            pOrientationScreenAPI.innerText = " ORIENTATION SCREEN API : " + _orientationScreenAPI;

            pcCriOS.innerText = " ORIENTATION CLIENT HEIGHT CriOS : " + navigator.userAgent.match(/(criOS)/ig);
            pCPH1937.innerText = " ORIENTATION CLIENT HEIGHT CPH1937 : " + navigator.userAgent.match(/(CPH1937)/ig);
            pClientHeight.innerText = " CLIENT HEIGHT ( document.documentElement.clientWidth < document.documentElement.clientHeight ): " + (document.documentElement.clientWidth < document.documentElement.clientHeight ? 1 : 0 );
            pIsPortrait.innerText = "IS PROTRAIT MEDIA QUERY : " + _isPortrait;
            pIsPortraitListener.innerText = "IS PROTRAIT MEDIA QUERY LISTENER : " + _isPortraitListener;

            _logContainer.appendChild(pDevice);
            _logContainer.appendChild(pOrientationScreenAPI);
            _logContainer.appendChild(pcCriOS);
            _logContainer.appendChild(pCPH1937);
            _logContainer.appendChild(pClientHeight);
            _logContainer.appendChild(pIsPortrait);
            _logContainer.appendChild(pIsPortraitListener);
        }
    </script>

</body>
</html>
